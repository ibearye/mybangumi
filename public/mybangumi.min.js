let Bangumi=e=>{function t(e){l||(i=!0,p.open("GET","https://api.thebearsoft.cn/v1/mybangumi/list?ps="+u+"&pn="+e+"&follow_status="+r+"&vmid="+s,!0),p.send())}function n(){data=JSON.parse(p.responseText),total=data.data.total,data.data.list.forEach(e=>{let t=document.createElement("div"),n=document.createElement("img"),a=document.createElement("h3"),s=document.createElement("a");t.className="bangumi_item",n.className="bangumi_cover",a.className="bangumi_title",s.target="_blank",s.href=e.url;let m=e.cover.replace(/^http\:\/\//,"https://"),u=m.match(/[^/]+(?!.*[png|jpg|jpeg])$/);if(n.src="https://api.thebearsoft.cn/v1/mybangumi/img/?coverUrl="+encodeURIComponent(m)+"&coverName="+u,a.innerText=e.title,c){let n=document.createElement("span");n.className="bangumi_score",e.hasOwnProperty("rating")&&(n.innerText=e.rating.score,t.appendChild(n))}s.append(n,a),t.appendChild(s),g.appendChild(t)}),document.getElementsByClassName("bangumi_item").length>=total&&(l=!0)}function a(e){r!=e.target.dataset.status&&(l=!1,menus[r].className="bangumi_menu",r=e.target.dataset.status,menus[r].className="bangumi_menu bangumi_menu_current",m=1,g.innerHTML=null,t(m))}let s=e.vmid,m=1,u=e.hasOwnProperty("ps")?e.ps:15,r=e.hasOwnProperty("defaultStatus")?e.defaultStatus:3,c=!e.hasOwnProperty("showScore")||e.showScore,o=!e.hasOwnProperty("showBar")||e.showBar,l=!1,i=!1,d=document.getElementsByClassName(e.container)[0],p=new XMLHttpRequest,g=document.createElement("div");if(g.className="bangumi_list",d.append(g),o){let e=document.createElement("div");e.className="bangumi_bar",menus=[document.createElement("span"),document.createElement("span"),document.createElement("span"),document.createElement("span")];for(let e=0;e<menus.length;e++)menus[e].className="bangumi_menu",menus[e].dataset.status=e,menus[e].addEventListener("click",e=>a(e));menus[0].innerText="全部",menus[1].innerText="想看",menus[2].innerText="在看",menus[3].innerText="看过",menus[r].className="bangumi_menu bangumi_menu_current",e.append(menus[0],menus[1],menus[2],menus[3]),d.insertBefore(e,g)}p.onreadystatechange=(()=>{4==p.readyState&&200==p.status&&(n(),i=!1)}),document.onscroll=(()=>{if((document.scrollHeight||document.body.scrollHeight)<=(window.innerHeight||document.clientHeight||document.body.clientHeight)+(window.pageYOffset||document.scrollTop||document.body.scrollTop)){if(i)return;m++,t(m)}}),t(m)};